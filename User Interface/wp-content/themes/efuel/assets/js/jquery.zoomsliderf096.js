/*
 *  zoomSlider - v0.2.3
 *  CSS3 background zoom slideshow
 *  http://mingthings.com
 *
 *  Made by Ming Yeung
 *  Under MIT License
 */
!function(s,t,e,n){function a(i,t){this.element=i,this.$el=s(i),this._defaults=r,this._name=l;var e=this.$el.data(),n={};for(var a in e)if(e.hasOwnProperty(a)&&a.match(/zs[A-Z]/)){var o=a.substr(2);o=o.charAt(0).toLowerCase()+o.slice(1),n[o]=e[a]}return this.settings=s.extend({},r,n,t),null==this.settings.src||this.settings.src.length<1?void console.log("ZoomSlider terminated - invalid input."):void this.init()}var l="zoomSlider",r={src:null,src2:null,speed:8e3,initzoom:1.2,switchSpeed:1e3,interval:4600,autoplay:!0,bullets:!0,overlay:"plain"};s.extend(a.prototype,{init:function(){0==s.isArray(this.settings.src)&&(this.settings.src=[this.settings.src]),0==s.isArray(this.settings.src2)&&(this.settings.src2=[this.settings.src2]),this.transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},this.transEndEventName=this.transEndEventNames[Modernizr.prefixed("transition")],this.support=Modernizr.csstransitions&&Modernizr.csstransforms;var i=Modernizr.prefixed("transform");switch(i=i.replace(/([A-Z])/g,function(s,i){return"-"+i.toLowerCase()}).replace(/^ms-/,"-ms-"),this.transitionProp={transition:i+" "+this.settings.speed+"ms ease-out, opacity "+this.settings.switchSpeed+"ms"},this.numSlides=this.settings.src.length,this.$el.css("position")){case"relative":case"absolute":case"fixed":break;default:this.$el.css("position","relative")}var t=this,e=s("<img />");e.load(function(){1==t.numSlides?t.initSingle():t.initSlideshow()}),e.attr("src",this.settings.src[0])},initSlideshow:function(){var e=this,n=s('<div class="zs-slideshow"></div>'),a=s('<div class="zs-slides"></div>'),l=s('<div class="zs-arrows"></div>'),r=s('<div class="zs-layer"></div>'),o=s('<div class="zs-bullets"></div>');for(i=0;i<this.numSlides;i++){var d=s('<div class="zs-slide zs-slide-'+i+'"></div>');d.css({"background-image":"url('"+this.settings.src[i]+"')"}).appendTo(a);var h=s('<div class="zs-bullet zs-bullet-'+i+'"></div>');h.appendTo(o),0==i&&(d.addClass("active").css("opacity",1),h.addClass("active"),s(".zs-enabled .ltx-zs-slider-inner.ltx-zs-slide-"+i).addClass("visible"))}e._promoteChildren(),r.css({"background-image":"url('"+this.settings.src2[0]+"')"}),n.append(r),n.append(a).prependTo(this.$el),1==this.settings.bullets&&(n.append(o),n.on("click",".zs-bullet",function(i){e.jump(s(this).index())})),1==this.settings.arrows&&(s('<div class="container"><span class="arrow-right">'+this.settings.next+'</span><span class="arrow-left">'+this.settings.prev+"</span></div>").appendTo(l),this.$el.append(l),this.$el.on("click",".arrow-left",function(s){e.prev()}),this.$el.on("click",".arrow-right",function(s){e.next()})),this.pos=0,this.pending=null,this.switching=!1,this.$slideshow=n,this.$slides=a.children(".zs-slide"),this.$bullets=o.children(".zs-bullet"),this.$el.addClass("zs-enabled"),"dots"==this.settings.overlay?this.$el.addClass("overlay-dots"):"plain"==this.settings.overlay&&this.$el.addClass("overlay-plain");var c=s(".zs-enabled .ltx-zs-slider-inner");if(this.support){var p=this.$slides.eq(0),u=this.settings.initzoom;p.css("opacity",0).css(this.transitionProp),s(".ltx-zs-slider-wrapper").css("min-height",c.height()+"px"),jQuery(t).on("resize",function(){s(".ltx-zs-slider-wrapper").css("min-height",c.height()+"px")}),setTimeout(function(){p.css({opacity:1,transform:"scale("+u+", "+u+")","z-index":2})},50)}1==this.settings.autoplay&&this.play()},initSingle:function(){var i=this,t=s('<div class="zs-slideshow"></div>'),e=s('<div class="zs-slides"></div>'),n=s('<div class="zs-slide zs-slide-0"></div>');n.css({"background-image":"url('"+this.settings.src[0]+"')"}).appendTo(e),n.addClass("active").css("opacity",1),s(".zs-enabled .ltx-zs-slider-inner.ltx-zs-slide-0").addClass("visible"),i._promoteChildren(),t.append(e).prependTo(this.$el),this.$el.addClass("zs-enabled"),"dots"==this.settings.overlay?this.$el.addClass("overlay-dots"):"plain"==this.settings.overlay&&this.$el.addClass("overlay-plain"),this.support&&(n.css("opacity",0).css(this.transitionProp),setTimeout(function(){n.css({opacity:1,transform:"scale("+this.settings.initzoom+", "+this.settings.initzoom+")","z-index":2})},50))},_promoteChildren:function(){this.$el.children().each(function(i){$this=s(this),"auto"==$this.css("z-index")&&$this.css("z-index",2),"static"==$this.css("position")&&$this.css("position","relative")})},jump:function(i){if(i>=this.numSlides)return void console.log("ZoomSlider: jump(pos) aborted. supplied index out of range.");if(this.pos!=i){if(this.switching)return void(this.pending=i);var t=this,e=this.$slides.eq(this.pos),n=this.$slides.eq(i);s(".zs-enabled .ltx-zs-slider-inner.visible").removeClass("visible"),s(".zs-enabled .ltx-zs-slider-inner.ltx-zs-slide-"+i).addClass("visible"),this.support?(this.switching=!0,e.css("z-index",1),n.addClass("active").css(this.transitionProp).css({opacity:1,transform:"scale("+this.settings.initzoom+", "+this.settings.initzoom+")","z-index":2}).on(this.transEndEventName,function(s){"opacity"==s.originalEvent.propertyName&&(lastSlideBg=e.css("background-image"),e.removeClass("active").removeAttr("style").css("background-image",lastSlideBg),n.off(t.transEndEventName),t.switching=!1,null!=t.pending&&setTimeout(function(){var s=t.pending;t.pending=null,t.$bullets.eq(s).click()},30))})):(e.removeClass("active"),n.addClass("active")),this.$bullets.eq(this.pos).removeClass("active"),this.$bullets.eq(i).addClass("active"),this.pos=i,this.settings.autoplay&&this.play()}},prev:function(){var s=this.pos-1;s<0&&(s=this.numSlides-1),this.jump(s)},next:function(){var s=this.pos+1;s>=this.numSlides&&(s=0),this.jump(s)},play:function(){null!=this.timer&&clearInterval(this.timer);var s=this;this.settings.autoplay=!0,this.timer=setInterval(function(){s.next()},this.settings.interval)},stop:function(){this.settings.autoplay=!1,clearInterval(this.timer),this.timer=null}}),s.fn[l]=function(i){return this.each(function(){s.data(this,"plugin_"+l)||s.data(this,"plugin_"+l,new a(this,i))})};var o=s("[data-zs-src]");o.length>0&&o.each(function(i){var t=s(this);t.zoomSlider()})}(jQuery,window,document);